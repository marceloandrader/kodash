<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Knockout : Asynchronous Module Definition (AMD) With RequireJs</title>
        <link href="../css/tripoli.simple.css" type="text/css" rel="stylesheet" />
        
        <link rel="stylesheet" type="text/css" href="../css/styles.css" />
        <link rel="stylesheet" type="text/css" href="../css/smallScreen.css" media="only screen and (max-device-width: 800px)" />
        <link rel="shortcut icon" href="img/favicon.ico" />
        <!--[if IE]><link rel="stylesheet" type="text/css" href="../css/tripoli.simple.ie.css" /><![endif]-->
        <!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="../css/ie6ie7.css" /><![endif]-->
        <!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="../css/ie6.css" /><![endif]-->
        <script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../js/knockout-2.2.0.js"></script>
<script type="text/javascript" src="../js/cufon-yui.js"></script>
<script type="text/javascript" src="../js/titilliummaps.font.js"></script>
<script type="text/javascript" src="../js/json2.js"></script>

<!--[if lt IE 7]>
<script defer type="text/javascript" src="../js/ie6pngfix.js"></script>
<![endif]-->

<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script> 
<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script> 
<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script> 
<link type="text/css" rel="stylesheet" href="../js/syntaxhighlighter_3.0.83/styles/shThemeFadeToGrey.css"/>  

<script type="text/javascript">
    $(function() {
        // Fancy fonts
        Cufon.replace('.titillium');
        Cufon.replace('.engraved', {
            textShadow: 'rgba(253, 224, 217, 0.45) 1.2px 1px'	
        });
        
        // Syntax highlighting
        $("pre > code").each(function() {
            var codeText = $(this).text();
            $(this).parent().text(codeText).addClass("brush:js");
        });
        SyntaxHighlighter.defaults['toolbar'] = false;
        SyntaxHighlighter.defaults['gutter'] = false;
        SyntaxHighlighter.all();
        
        // Highlight current top menu item
        var desiredMenuItem = '' || 'documentation';
        $(".main-menu a[rel=" + desiredMenuItem + "]").addClass("active");
        
        // Highlight current left-hand-nav menu item
        var urlFilename = location.href.match(/\/([^\/]+)$/);
        if (urlFilename) {
            $(".leftColContents li:has(a[href$=" + urlFilename[1] + "])").addClass("active");
        }
    });
</script> 
    </head>
    <body>
        <div id="wrapper">
            <div class="vspace"></div>
            <div class="main-menu">
    <ul>
        <li><a rel="home" href="../index.html">Home</a></li>
        <li><a rel="installation" href="../downloads/index.html">Download / Install</a></li>
        <li><a rel="tutorials" href="http://learn.knockoutjs.com/">Tutorials</a></li>
        <li><a rel="examples" href="../examples/">Live examples</a></li>
        <li><a rel="documentation" href="../documentation/introduction.html">Documentation</a></li>
        <li><a href="http://groups.google.com/group/knockoutjs">Forum</a></li>
        <li><a href="http://github.com/SteveSanderson/knockout">Source</a></li>
    </ul>
</div>        	
<div class="clear"></div>
            <div class="vspace"></div>
            <div>	
	<div class="leftCol">		
		<div class="leftColBackground">&nbsp;</div>
		<div class="leftColContents">
			<h1>Getting started</h1>

<ol>
    <li><a href="../documentation/introduction.html">How KO works and what benefits it brings</a></li>
    <li><a href="../downloads/index.html">Downloading and installing</a></li>
</ol>

<h1>Observables</h1>

<ol>
    <li><a href="../documentation/observables.html">Creating <em>view models</em> with <em>observables</em></a></li>
    <li><a href="../documentation/computedObservables.html">Using <em>computed observables</em></a></li>
    <li><a href="../documentation/observableArrays.html">Working with <em>observable arrays</em></a></li>	
</ol>

<h1>Bindings</h1>

<h2>Controlling text and appearance</h2>
<ol>
    <li><a href="../documentation/visible-binding.html">The <code>visible</code> binding</a></li>
    <li><a href="../documentation/text-binding.html">The <code>text</code> binding</a></li>
    <li><a href="../documentation/html-binding.html">The <code>html</code> binding</a></li>
    <li><a href="../documentation/css-binding.html">The <code>css</code> binding</a></li>
    <li><a href="../documentation/style-binding.html">The <code>style</code> binding</a></li>
    <li><a href="../documentation/attr-binding.html">The <code>attr</code> binding</a></li>
</ol>

<h2>Control flow</h2>
<ol>
    <li><a href="../documentation/foreach-binding.html">The <code>foreach</code> binding</a></li>
    <li><a href="../documentation/if-binding.html">The <code>if</code> binding</a></li>
    <li><a href="../documentation/ifnot-binding.html">The <code>ifnot</code> binding</a></li>
    <li><a href="../documentation/with-binding.html">The <code>with</code> binding</a></li>
</ol>

<h2>Working with form fields</h2>
<ol>
    <li><a href="../documentation/click-binding.html">The <code>click</code> binding</a></li>
    <li><a href="../documentation/event-binding.html">The <code>event</code> binding</a></li>
    <li><a href="../documentation/submit-binding.html">The <code>submit</code> binding</a></li>
    <li><a href="../documentation/enable-binding.html">The <code>enable</code> binding</a></li>
    <li><a href="../documentation/disable-binding.html">The <code>disable</code> binding</a></li>
    <li><a href="../documentation/value-binding.html">The <code>value</code> binding</a></li>
    <li><a href="../documentation/hasfocus-binding.html">The <code>hasfocus</code> binding</a></li>
    <li><a href="../documentation/checked-binding.html">The <code>checked</code> binding</a></li>
    <li><a href="../documentation/options-binding.html">The <code>options</code> binding</a></li>
    <li><a href="../documentation/selectedOptions-binding.html">The <code>selectedOptions</code> binding</a></li>    
    <li><a href="../documentation/uniqueName-binding.html">The <code>uniqueName</code> binding</a></li>		
</ol>

<h2>Rendering templates</h2>
<ol>
    <li><a href="../documentation/template-binding.html">The <code>template</code> binding</a></li>
</ol>

<h2>Binding syntax</h2>
<ol>
    <li><a href="../documentation/binding-syntax.html">The <code>data-bind</code> syntax</a></li>
    <li><a href="../documentation/binding-context.html">The binding context</a></li>
</ol>

<h1>Creating custom bindings</h1>
<ol>
    <li><a href="../documentation/custom-bindings.html">Creating custom bindings</a></li>
    <li><a href="../documentation/custom-bindings-controlling-descendant-bindings.html">Controlling descendant bindings</a></li>
    <li><a href="../documentation/custom-bindings-for-virtual-elements.html">Supporting virtual elements</a></li>
</ol>

<h1>Further techniques</h1>
<ol>
    <li><a href="../documentation/json-data.html">Loading and saving JSON data</a></li>
    <li><a href="../documentation/extenders.html">Extending observables</a></li>
    <li><a href="../documentation/throttle-extender.html">The <code>throttle</code> extender</a></li>
    <li><a href="../documentation/unobtrusive-event-handling.html">Unobtrusive event handling</a></li>
    <li><a href="../documentation/fn.html">Using <code>fn</code> to add custom functions</a></li>
</ol>

<h1>Plugins</h1>
<ol>
    <li><a href="../documentation/plugins-mapping.html">The <code>mapping</code> plugin</a></li>
</ol>

<h1>More information</h1>
<ol>
    <li><a href="../documentation/browser-support.html">Browser support</a></li>
    <li><a href="http://groups.google.com/group/knockoutjs">Getting help</a></li>
    <li><a href="../documentation/links.html">Links to tutorials &amp; examples</a></li>
    <li><a href="../documentation/amd-loading.html">Usage with AMD using RequireJs (Asynchronous Module Definition)</a></li>
</ol>

		</div>		
	</div>
	<div class="rightCol">
		<div class="documentation sticker">
		    <div class="content">
		    	<h1>Asynchronous Module Definition (AMD) With RequireJs</h1>	
		    	<h3 id='overview_of_amd'>Overview of AMD</h3>

<p>Excerpt From <a href='http://addyosmani.com/writing-modular-js/'>Writing Modular JavaScript With AMD, CommonJs &amp; ES Harmony</a>:</p>

<blockquote>
<p>When we say an application is modular, we generally mean it&#8217;s composed of a set of highly decoupled, distinct pieces of functionality stored in modules. As you probably know, loose coupling facilitates easier maintainability of apps by removing dependencies where possible. When this is implemented efficiently, its quite easy to see how changes to one part of a system may affect another.</p>

<p>Unlike some more traditional programming languages however, the current iteration of JavaScript (ECMA-262) doesn&#8217;t provide developers with the means to import such modules of code in a clean, organized manner. It&#8217;s one of the concerns with specifications that haven&#8217;t required great thought until more recent years where the need for more organized JavaScript applications became apparent.</p>

<p>Instead, developers at present are left to fall back on variations of the module or object literal patterns. With many of these, module scripts are strung together in the DOM with namespaces being described by a single global object where it&#8217;s still possible to incur naming collisions in your architecture. There&#8217;s also no clean way to handle dependency management without some manual effort or third party tools.</p>

<p>Whilst native solutions to these problems will be arriving in ES Harmony, the good news is that writing modular JavaScript has never been easier and you can start doing it today.</p>
</blockquote>

<h3 id='loading_knockoutjs_and_a_viewmodel_class_via_requirejs'>Loading Knockout.js and a ViewModel class via RequireJs</h3>

<p>HTML</p>

<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;text/javascript&quot; data-main=&quot;scripts/init.js&quot; src=&quot;scripts/require.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;First name: &lt;input data-bind=&quot;value: firstName&quot; /&gt;&lt;/p&gt;
        &lt;p&gt;First name capitalized: &lt;strong data-bind=&quot;text: firstNameCaps&quot;&gt;&lt;/strong&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>scripts/init.js</p>

<pre><code>require([&#39;knockout-x.y.z&#39;, &#39;appViewModel&#39;, &#39;domReady!&#39;], function(ko, appViewModel) {
    ko.applyBindings(new appViewModel());
});</code></pre>

<p>scripts/appViewModel.js</p>

<pre><code>// Main viewmodel class
define([&#39;knockout-x.y.z&#39;], function(ko) {
    return function appViewModel() {
        this.firstName = ko.observable(&#39;Bert&#39;);
        this.firstNameCaps = ko.computed(function() {
            return this.firstName().toUpperCase();
        }, this);
    };
});</code></pre>

<p>Of course, <code>x.y.z</code> should be replaced with the version number of the Knockout script you are loading (e.g., <code>knockout-2.2.0</code>).</p>

<h3 id='loading_knockoutjs_a_binding_handler_and_a_viewmodel_class_via_requirejs'>Loading Knockout.js, a Binding Handler, and a ViewModel class via RequireJs</h3>

<p>Documentation on Binding Handlers in general can be found <a href='http://knockoutjs.com/documentation/custom-bindings.html'>here</a>. This section is meant to demonstrate the power that AMD modules provide in maintaining your custom handlers. We will take the example of the <code>ko.bindingHandlers.hasFocus</code> example from the binding handlers documentation. By wrapping that handler in it&#8217;s own module you can restrict it&#8217;s use only to the pages that need it. The wrapped module becomes:</p>

<pre><code>define([&#39;knockout-x.y.z&#39;], function(ko){
    ko.bindingHandlers.hasFocus = {
        init: function(element, valueAccessor) { ... },
        update: function(element, valueAccessor) { ... }
    }
});</code></pre>

<p>After you have defined the module update the input element from the HTML example above to be:</p>

<pre><code>&lt;p&gt;First name: &lt;input data-bind=&quot;value: firstName, hasFocus: editingName&quot; /&gt;&lt;span data-bind=&quot;visible: editingName&quot;&gt; You&#39;re editing the name!&lt;/span&gt;&lt;/p&gt;</code></pre>

<p>Include the module in the list of dependencies for your view model:</p>

<pre><code>define([&#39;knockout-x.y.z&#39;, &#39;customBindingHandlers/hasFocus&#39;], function(ko) {
    return function appViewModel(){
        ...
        // Add an editingName observable
        this.editingName = ko.observable();
    };
});</code></pre>

<p>Note that the custom binding handler module does not inject anything into our ViewModel module, that is because it does not return anything. It just appends additional behavior to the knockout module.</p>

<h3 id='requirejs_download'>RequireJs Download</h3>

<p>RequireJs can be downloaded from <a href='http://requirejs.org/docs/download.html'>http://requirejs.org/docs/download.html</a>.</p>    
		    </div>
		    
		    <div class="clear"></div>
		</div>
	</div>	
</div>
            <div class="clear"></div>
            <div class="main-menu">
    <ul>
        <li><a rel="home" href="../index.html">Home</a></li>
        <li><a rel="installation" href="../downloads/index.html">Download / Install</a></li>
        <li><a rel="tutorials" href="http://learn.knockoutjs.com/">Tutorials</a></li>
        <li><a rel="examples" href="../examples/">Live examples</a></li>
        <li><a rel="documentation" href="../documentation/introduction.html">Documentation</a></li>
        <li><a href="http://groups.google.com/group/knockoutjs">Forum</a></li>
        <li><a href="http://github.com/SteveSanderson/knockout">Source</a></li>
    </ul>
</div>        	
<div class="clear"></div>
        </div>
        
        <div id="page-footer">(c) knockoutjs.com</div> 
        
        <script type="text/javascript">               
            // Analytics
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-65756-7']);
            _gaq.push(['_trackPageview']);	
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();             
        </script>
    </body>
</html>